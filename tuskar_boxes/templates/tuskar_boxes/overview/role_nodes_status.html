{% load i18n %}
{% load url from future %}
{% load horizon %}

<h4>{% trans "Deployment Roles" %}</h4>
<div class="row">
  <div class="deploy-role-status col-xs-5">
  {% for role in roles %}
    <div class="boxes-role boxes-role-{{ role.name|slugify }} clearfix">
        <div class="col-xs-2 deploy-role-count">
          {% if  role.finished %}
            {{ role.deployed_node_count }}
          {% else %}
            {{ role.deployed_node_count }}<small class="text-muted">/{{ role.planned_node_count }}</small>
          {% endif %}
        </div>
        <div class="col-xs-10 deploy-role-name">
          <strong class="deployment-roles-label">{{ role.name|capfirst }}</strong>
        </div>
      </div>
  {% endfor %}
  </div>
  <div class="col-xs-7 boxes-nodes {% if nodes|length >= 100 %}boxes-nodes-small{% elif nodes|length >= 25 %}boxes-nodes-medium{% endif %}">
      {% for node in nodes %}{% spaceless %}
        {% include "tuskar_boxes/overview/_node_info.html" with node=node %}
      {% endspaceless %}{% endfor %}
  </div>
</div>

<script type="text/html" id="roles-template">{% spaceless %}{% jstemplate %}
[[#roles]]
    <div class="boxes-role boxes-role boxes-role-[[ slug ]] clearfix">
      <div class="col-xs-2 deploy-role-count">
        [[#finished]]
          [[ deployed_node_count ]]
        [[/finished]]
        [[^finished]]
          [[ deployed_node_count ]]<small class="text-muted">/[[ planned_node_count ]]</small>
        [[/finished]]
      </div>
      <div class="col-xs-10 deploy-role-name">
        <strong class="deployment-roles-label" >[[ name ]]</strong>
      </div>
    </div>
[[/roles]]
{% endjstemplate %}{% endspaceless %}</script>
<script type="text/html" id="nodes-template">{% spaceless %}{% jstemplate %}
[[#nodes]]
  <div
    class="boxes-node boxes-role-[[ role_slug ]] status-[[ state_slug ]]"
    data-toggle="popover"
    title="[[ role_name ]][[^role_name]]{% trans "Free" %}[[/role_name]] {% trans 'node' %}"
    data-content="<dl>
      <dt>{% trans "Node UUID" %}</dt>
      <dd>[[ uuid ]]</dd>
      <dt>{% trans "Architecture" %}</dt>
      <dd>[[ cpu_arch ]]</dd>
      <dt>{% trans "CPUs" %}</dt>
      <dd>[[ cpus ]]</dt>
      <dt>{% trans "RAM (MB)" %}</dt>
      <dd>[[ memory_mb ]]</dd>
      <dt>{% trans "HDD (GB)" %}</dt>
      <dd>[[ local_gb ]]</dd>
    </dl>"
  ><i class="fa fa-lg [[ state_icon ]]"></i></div>
[[/nodes]]
{% endjstemplate %}{% endspaceless %}</script>
